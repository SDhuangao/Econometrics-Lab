----------------------------------------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  D:\大三上\中级计量经济学\老师发的\Lab\上机5&6\HW4_2.log
  log type:  text
 opened on:  19 Dec 2018, 21:24:40

. *HW4_2
. clear all

. cd "D:\大三上\中级计量经济学\老师发的\Lab\上机5&6"
D:\大三上\中级计量经济学\老师发的\Lab\上机5&6

. import excel us_macro_quarterly, sheet(us_macro_quarterly.xls) cellrange(A1:J229) firstrow

. generate time=q(1957q1)+_n-1

. format time %tq

. sort time

. tsset time
        time variable:  time, 1957q1 to 2013q4
                delta:  1 quarter

. 
. gen LPCECTPI = log(PCECTPI)

. gen IPCEP = 400*(LPCECTPI[_n]-LPCECTPI[_n-1])
(1 missing value generated)

. 
. gen LCPIAUCSL = log(CPIAUCSL)

. gen ICPI = 400*(LCPIAUCSL[_n]-LCPIAUCSL[_n-1])
(1 missing value generated)

. 
. gen y=ICPI-IPCEP
(1 missing value generated)

. *a
. sum IPCEP if tin(1963q1,2012q4)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
       IPCEP |        200    3.555838    2.570083  -5.760956   11.78942

. sum ICPI if tin(1963q1,2012q4)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
        ICPI |        200    4.059663    3.066619  -9.267235   15.47909

. //mean(IPCEP) <mean(ICPI), these point estimates are consistent with the presence
. //of economically significant substitution bias in the CPI
. 
. *b
. sum y if tin(1963q1,2012q4)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
           y |        200    .5038252    .9674085  -3.506279   4.484844

. //in the sample:y=ICPI-IPCEP
. //E(y)=E(ICPI-IPCEP)=E(ICPI)-E(IPCEP), so they are equal.
. 
. *c
. //in population:y=ICPI-IPCEP
. //E(y)=E(ICPI-IPCEP)=E(ICPI)-E(IPCEP), so they are equal.
. 
. *d
. //E(Y_t)=E(b_0+u_t)=E(b_0)+E(u_t)=b_0
. //cov(u_t,u_t-1)=cov(Y_t-b_0,Y_(t-1)-b_0)=cov(Y_t,Y_(t-1))
. reg y L.y, r

Linear regression                               Number of obs     =        226
                                                F(1, 224)         =       5.45
                                                Prob > F          =     0.0205
                                                R-squared         =     0.0662
                                                Root MSE          =     .92505

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           y |
         L1. |   .2573233   .1102643     2.33   0.020     .0400354    .4746113
             |
       _cons |   .3296842   .0662558     4.98   0.000     .1991198    .4602486
------------------------------------------------------------------------------

. //_b[L1.y]=.2573233, not small. so we can think it's  serially correlated.
. 
. *e
. //y mean:.5038252   se:.9674085
. //a 95% confidence interval: .5038252+-.9674085  [-.4635833,1.4712337]
. //m = 0.75*T^(1/3)= 4.  ,choose 4 ,rule of thumb
. dis "m =" 0.75*(200^(1/3))
m =4.3860266

. 
. *f
. //Not at 5%, the 95% confidence interval is [-.4635833,1.4712337]
. 
. *g
. estat sbsingle
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
........

Test for a structural break: Unknown break date

                             Number of obs =        226

Full sample:                 1957q3 - 2013q4
Trimmed sample:              1966q1 - 2005q3
Estimated break date:        1966q1
Ho: No structural break

     Test            Statistic          p-value
-----------------------------------------------
     swald            15.4218           0.0094
-----------------------------------------------
Exogenous variables:           L.y
Coefficients included in test: L.y _cons

. //we reject the null hypothesis of no structural break at the 1% level 
. //and that the estimated break date is 1966q1.
. //b is not stable at 1% level, we think b has a structral break at 1966q1
. 
. 
. log close
      name:  <unnamed>
       log:  D:\大三上\中级计量经济学\老师发的\Lab\上机5&6\HW4_2.log
  log type:  text
 closed on:  19 Dec 2018, 21:24:41
----------------------------------------------------------------------------------------------------------------------
